jQuery(document).on("added_to_cart",(t,e,r,a)=>{let o=document.querySelector("#panel_minicart"),c=a&&a[0]?a[0].getAttribute("data-product_id"):null;if(null!==o){if(!o.classList.contains("is-active")){let n=new slidepanel;n.load("#panel_minicart")}if(c){var i;o.querySelector(`#cart-item-${c}`).scrollIntoView()}}}),jQuery(".woocommerce-cart").on("click",".woocommerce-cart-form .js-quantity-change span",()=>{var t=jQuery("button[name='update_cart']");setTimeout(()=>{jQuery(".woocommerce-message").remove(),t.prop("disabled",!1).trigger("click")},500)});class miniCart{constructor(){this.productAddToCart(),this.update(),this.delete(),this.noAjaxButton()}cartContent(t){let e=document.querySelectorAll(".widget_shopping_cart_content");e.forEach(e=>{e.innerHTML=t.content}),document.body.classList.contains("woocommerce-checkout")&&jQuery(document.body).trigger("update_checkout");let r=document.querySelector("input[name='cart_count_total']"),a=document.querySelectorAll(".js-cart-total");null!==r&&a.forEach(t=>{t.innerHTML=r.value})}noAjaxButton(){let t=document.querySelector(".single-product:not(.js-ajax-add-to-cart) .js-sticky-product .single_add_to_cart_button, .js-sticky-product.product-type-grouped .single_add_to_cart_button"),e=document.querySelector(".single-product form.cart .single_add_to_cart_button");if(null==t||null==e)return!1;t.addEventListener("click",t=>{t.preventDefault(),e.click()})}updateAction(t){let e=this,r=t.closest(".js-cart-item"),a=t.closest(".widget_shopping_cart_content"),o=r.querySelector("[name='quantity']"),c=r.querySelector("[name='product_id']"),n=r.querySelector("[name='cart_item_key']"),i=o.value;if(t.classList.contains("plus")&&(i=parseInt(o.value)+1),t.classList.contains("minus")&&(i=parseInt(o.value)-1),i<1)return!1;setTimeout(()=>{jQuery.ajax({url:woocommerce_params.wc_ajax_url.toString().replace("%%endpoint%%","update_cart"),type:"POST",data:{product_id:c.value,quantity:i,cart_item_key:n.value},beforeSend:function(t){a.classList.add("rt-loading")},success:function(t){if(t.error&&t.product_url){window.location=t.product_url;return}e.cartContent({content:t.fragments["div.widget_shopping_cart_content"],productID:c}),a.classList.remove("rt-loading")},error:function(){console.error("Failed to update item from cart.")}})},500)}update(){let t=document.querySelectorAll(".widget_shopping_cart, #order_review");t.forEach(t=>{t.addEventListener("click",e=>{let r=e.target.closest(".js-cart-item .rt-qty span");r&&t.contains(r)&&(e.preventDefault(),this.updateAction(r))}),t.addEventListener("keyup",e=>{let r=e.target.closest(".js-cart-item .rt-qty .input-text");r&&t.contains(r)&&(e.preventDefault(),this.updateAction(r))})})}productAddToCart(){let t=this,e=document.querySelectorAll(".js-ajax-add-to-cart .single_add_to_cart_button"),r=document.querySelector(".type-product"),a=document.querySelector("#panel_minicart");e.forEach(e=>{e.addEventListener("click",e=>{let o=e.currentTarget;if(o.classList.contains("wc-variation-selection-needed")&&document.querySelector("form.variations_form").scrollIntoView(),r.classList.contains("product-type-external")||r.classList.contains("product-type-grouped")||o.classList.contains("disabled")||o.classList.contains("loading"))return!1;let c=document.querySelector('form.cart input[name="quantity"]');c.getAttribute("max");let n=document.querySelector('form.cart button[name="add-to-cart"]'),i=document.querySelector('form.cart input[name="variation_id"]');if(e.preventDefault(),null!==i)var l=i.value;else var l=n.value;jQuery.ajax({url:woocommerce_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart"),type:"POST",data:{product_id:l,quantity:c.value},beforeSend:function(t){o.classList.add("loading")},success:function(e){if(e.error&&e.product_url){window.location=e.product_url;return}if(t.cartContent({content:e.fragments["div.widget_shopping_cart_content"],productID:l}),null!==a){let r=new slidepanel;r.load("#panel_minicart");let c=a.querySelector(`#cart-item-${l}`);c.scrollIntoView()}o.classList.remove("loading")},error:function(){console.error("Failed to add to cart item to cart.")}})})})}delete(){let t=this,e=document.querySelectorAll(".widget_shopping_cart, #order_review");e.forEach(e=>{e.addEventListener("click",r=>{var a=r.target.closest(".js-remove-cart-button");if(a&&e.contains(a)){r.preventDefault();let o=a.closest(".js-cart-item"),c=a.closest(".widget_shopping_cart_content");o.classList.add("item-delete");let n=o.querySelector("[name='cart_item_key']"),i=o.querySelector("[name='product_id']");jQuery.ajax({url:woocommerce_params.wc_ajax_url.toString().replace("%%endpoint%%","remove_from_cart"),type:"POST",data:{cart_item_key:n.value},beforeSend:function(t){c.classList.add("rt-loading")},success:function(e){t.cartContent({content:e.fragments["div.widget_shopping_cart_content"],productID:i}),c.classList.remove("rt-loading")},error:function(){console.error("Failed to remove item from cart.")}})}})})}}new miniCart;