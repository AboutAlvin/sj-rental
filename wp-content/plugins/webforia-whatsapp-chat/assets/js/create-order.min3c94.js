class WhatsApp_Create_Order{constructor(){this.createOrder()}createOrder(){const e=document.querySelector("form.js-whatsapp-create-order");null!=e&&e.addEventListener("submit",(e=>{e.preventDefault();const r=e.currentTarget,t=r.querySelector("button"),a=r.querySelector(".order_form_message"),o=document.querySelector('form.cart input[name="quantity"]'),n=document.querySelector('form.cart input[name="variation_id"]'),c=document.querySelector('form.cart input[name="whatsapp_product_id"]'),l=document.querySelector('form.cart input[name="whatsapp_pixel"]'),s=document.querySelector('form.cart input[name="whatsapp_number"]'),i=r.querySelector('input[name="whatsapp_order_form_nonce"]');let u="";u=null!=n?n.value:c.value,r.classList.add("rt-loading"),t.classList.add("is-loading"),fetch("?wc-ajax=whatsapp_create_order",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"result",field:serialize(r),product_id:u,quantity:o?o.value:1,check_nonce:i.value})}).then((e=>e.json())).then((e=>{if(e&&0==e.error){const r=e.link,t=s.value,a=/(\?phone=)\d+/,o=r.replace(a,`$1${t}`);window.location.href=o,"function"==typeof fbq&&null!=l.value&&"none"!=l.value&&fbq("track",l.value)}a.innerHTML=e.message,r.classList.remove("rt-loading"),t.classList.remove("is-loading")})).catch((e=>{1==confirm(order_var.errorMessage)&&window.location.reload(),console.log(e)}))}))}}new WhatsApp_Create_Order;